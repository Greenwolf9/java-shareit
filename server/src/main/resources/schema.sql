CREATE TABLE IF NOT EXISTS USERS
(
    ID    BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME  VARCHAR(255),
    EMAIL VARCHAR(512) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS ITEM_REQUEST
(
    ID  BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DESCRIPTION VARCHAR(255),
    REQUESTOR_ID BIGINT REFERENCES USERS (ID),
    CREATED  TIMESTAMP
);

CREATE TABLE IF NOT EXISTS ITEMS
(
    ID          BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME        VARCHAR(255),
    DESCRIPTION VARCHAR(255),
    AVAILABLE   BOOLEAN,
    USER_ID     BIGINT NOT NULL REFERENCES USERS (ID),
    REQUEST_ID  BIGINT REFERENCES ITEM_REQUEST (ID)
);

CREATE TABLE IF NOT EXISTS BOOKING
(
    ID         BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    START_DATE TIMESTAMP,
    END_DATE   TIMESTAMP,
    ITEM_ID    BIGINT NOT NULL REFERENCES ITEMS (ID),
    USER_ID    BIGINT NOT NULL REFERENCES USERS (ID),
    STATUS     VARCHAR(50)
);

CREATE TABLE IF NOT EXISTS COMMENTS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TEXT     VARCHAR(255),
    ITEM_ID    BIGINT NOT NULL REFERENCES ITEMS (ID),
    AUTHOR_ID  BIGINT NOT NULL REFERENCES USERS (ID),
    CREATED  TIMESTAMP
);
